{
  "id": "wheel-multiple-sold-calls-in-same-cycle",
  "description": "Multiple sold_call legs stay within the same cycle (no split heuristic)",
  "input": {
    "symbol": "AAPL",
    "transactions": [
      {
        "id": "t1",
        "executedAt": "2026-01-01T10:00:00Z",
        "type": "option_sell_to_open",
        "optionContract": { "right": "put" },
        "raw": null
      },
      {
        "id": "t2",
        "executedAt": "2026-01-05T10:00:00Z",
        "type": "assigned",
        "optionContract": { "right": "put" },
        "raw": null
      },
      {
        "id": "t3",
        "executedAt": "2026-01-05T10:01:00Z",
        "type": "buy",
        "optionContract": null,
        "raw": null
      },
      {
        "id": "t4",
        "executedAt": "2026-01-10T10:00:00Z",
        "type": "option_sell_to_open",
        "optionContract": { "right": "call" },
        "raw": null
      },
      {
        "id": "t5",
        "executedAt": "2026-01-11T10:00:00Z",
        "type": "STO",
        "optionContract": { "right": "call" },
        "raw": null
      },
      {
        "id": "t6",
        "executedAt": "2026-01-15T10:00:00Z",
        "type": "assigned",
        "optionContract": { "right": "call" },
        "raw": null
      }
    ]
  },
  "expected": [
    {
      "symbol": "AAPL",
      "status": "closed",
      "openedAt": "2026-01-01T10:00:00.000Z",
      "closedAt": "2026-01-15T10:00:00.000Z",
      "legs": [
        {
          "kind": "sold_put",
          "occurredAt": "2026-01-01T10:00:00.000Z",
          "transactionId": "t1",
          "raw": null
        },
        {
          "kind": "assigned_put",
          "occurredAt": "2026-01-05T10:00:00.000Z",
          "transactionId": "t2",
          "raw": null
        },
        {
          "kind": "stock_buy",
          "occurredAt": "2026-01-05T10:01:00.000Z",
          "transactionId": "t3",
          "raw": null
        },
        {
          "kind": "sold_call",
          "occurredAt": "2026-01-10T10:00:00.000Z",
          "transactionId": "t4",
          "raw": null
        },
        {
          "kind": "sold_call",
          "occurredAt": "2026-01-11T10:00:00.000Z",
          "transactionId": "t5",
          "raw": null
        },
        {
          "kind": "called_away",
          "occurredAt": "2026-01-15T10:00:00.000Z",
          "transactionId": "t6",
          "raw": null
        }
      ]
    }
  ]
}
